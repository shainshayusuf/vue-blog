<template>
    <div class="admin-page">
        <section class="new-post">
            <AppButton @click="$router.push('admin/new-post')">Create Post</AppButton>
        </section>
        <section class="existing-posts">
            <h1>Existing Posts</h1>
            <PostList isAdmin :posts="loadedPosts"/>
        </section>
    </div>

</template>

<script>
import PostList from '@/components/Posts/PostList'
import AppButton from '@/components/UI/AppButton'
export default {
    layout:'admin',
    components:{
        PostList,
        AppButton
    },
    async asyncData() {

      let promise = new Promise(resolve => {
        setTimeout(() => {
          resolve(
            [{
              id: '1',
              title: 'First post',
              previewText: 'Herman Ostrovskiy',
              thumbnail:
              "https://static.pexels.com/photos/270348/pexels-photo-270348.jpeg"
            },
              {
                id: '2',
                title: 'Second post',
                previewText: 'Herman Ostrovskiy too',
                thumbnail:
              "https://static.pexels.com/photos/270348/pexels-photo-270348.jpeg"
              },
              {
                id: '3',
                title: 'Third post',
                previewText: 'Herman Ostrovskiy too',
                thumbnail:
              "https://static.pexels.com/photos/270348/pexels-photo-270348.jpeg"
              }]
          )
        }, 1000)
      })

      let loadedPosts = await promise;

      return {
        loadedPosts
      }

    }
}
</script>

<style scoped>
.admin-page{
    padding: 20px;
}
.new-post{
    text-align: center;
    border-bottom: 2px solid #ccc;
    padding-bottom: 10px;
}
.existing-posts{
    text-align: center;
}
</style>